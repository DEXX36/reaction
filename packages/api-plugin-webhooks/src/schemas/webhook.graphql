enum WebhookTopic {
  AFTER_PRODUCT_CREATE
  AFTER_PRODUCT_UPDATE
  AFTER_PRODUCT_SOFT_DELETE
  AFTER_VARIANT_CREATE
  AFTER_VARIANT_UPDATE
  AFTER_VARIANT_SOFT_DELETE
  AFTER_TAG_CREATE
  AFTER_TAG_UPDATE
  AFTER_TAG_DELETE
  AFTER_SET_TAG_HERO_MEDIA
  AFTER_ADD_TAGS_TO_PRODUCTS
  AFTER_REMOVE_TAGS_FROM_PRODUCTS
}

"Represents a single Reaction Webhook"
type Webhook implements Node {
  "The webhook ID"
  _id: ID!

  "The shop for which the webhook is registered"
  shopId: String!

  "The outbound URL that this webhook is going to call"
  address: String!

  "The topic for which this webhook was subscribed to"
  topic: WebhookTopic!

  "No of times this webhook has failed when calling address"
  failureCounter: Int!

  "The date and time at which this webhook was created"
  createdAt: DateTime!

  "The date and time at which this webhook was last updated"
  updatedAt: DateTime!
}

extend type Query {
  "Returns a webhook from a provided ID."
  webhook(
    "ID of Webhook"
    id: String!,
  ): Webhook
}

extend type Query {
  "Returns webhooks from a provided shop ID."
  webhooksByShopId(
    "Shop ID"
    shopId: String!,
  ): [Webhook]
}
